<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invert: A Coding Challenge</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!--Icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!--Dev Icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

    <!--Prism CSS-->
    <link rel="stylesheet" href="/css/prism.css">

    <!--CSS Themes-->
    <link rel="stylesheet" href="css/themes.css">

    <!--Custom CSS-->
    <link rel="stylesheet" href="css/site.css">
</head>

<body data-ss-theme="yellow">
    <header>
        <!--Navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="/index.html">
                    <img src="img/S_Logo.png" height="40" />
                    Invert
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="/index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/app.html">The App</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/code.html">The Code</a>
                        </li>
                        <li class="nav-item">
                            <!--Change Me-->
                            <a class="nav-link" href="https://github.com/sijo708/ReverseString.git">The Repo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://sijosajan.com/">Portfolio</a>
                        </li>
                        <li class="nav-item">
                            <!--Change Me-->
                            <a class="nav-link" href="https://myblog-production-9fdb.up.railway.app/">Blog</a>
                        </li>

                    </ul>

                </div>
            </div>
        </nav>
    </header>

    <main class="container py-3">
        <h1 class="border-bottom border-dark">The Code</h1>
        <div class="row">
            <!--the JavaScript code-->
            <div class="col-12 col-lg-8">
                <pre class="line-numbers">
                    <code class="language-js">
                        function getValues() {
                            let userMessage = document.getElementById('message').value;
                        
                            if (userMessage.length < 2) {
                                Swal.fire({
                                    icon: 'error',
                                    backdrop: false,
                                    title: 'Woops!',
                                    text: 'Please enter at least 2 characters to reverse'
                                });
                        
                                return;
                            }
                        
                            let reversed = reverseString(userMessage);
                        
                            let stringObject = {
                                input: escapeHTML(userMessage),
                                reversedInput: escapeHTML(reversed)
                            };
                        
                            displayMessage(stringObject);
                        }
                        
                        function reverseString(inputString) {
                            let result = '';
                        
                            // loop through the string from the end towards the beginning
                            for (let index = inputString.length - 1; index >= 0; index--) {
                                result += inputString[index];
                            }
                        
                            return result;
                        }
                        
                        function displayMessage(stringObject) {
                            // put our message in the HTML
                            document.getElementById('result').innerHTML =
                                `You entered: <b>${stringObject.input}</b>. Your message reversed is: <b>${stringObject.reversedInput}</b>`;
                        
                            document.getElementById('alert').classList.remove('invisible');
                        }
                        
                        function escapeHTML(inputString) {
                            return inputString.replace(/[&<>'"]/g, function(match) {
                                switch (match) {
                                    case '&': return '&amp;';
                                    case '<': return '&lt;';
                                    case '>': return '&gt;';
                                    case "'": return '&#39;';
                                    case '"': return '&quot;';
                                }
                            });
                        }                        
                        
                    </code>
                </pre>
            </div>

            <!-- The code's explanation -->
            <div class="col-12 col-lg-4">
                <p>The code is structured in 4 functions</p>
                <h5><code>getValues()</code></h5>
                <p>
                    The <code>getValues</code> function gets the 
                    message from the input element and save it. If the message is less than 2 characters it shows an error.
                    If the input characters is 2 or more it will reverse the characters using reverseString. Then it creates 
                    an object with reversed and displays the reversedString.
                </p>
                <h5><code>reverseString()</code></h5>
                <p>
                    The <code>reverseString</code> function takes an input string and initializes an empty result string. 
                    It then iterates through the input string from the last character to the first, appending each character to the result string, effectively reversing the input string. 
                    Finally, it returns the reversed string.
                </p>
                <h5><code>displayMessage()</code></h5>
                <p>
                    The <code>displayMessage</code> function takes an object containing the original and reversed strings. 
                    It updates the HTML element with id result to display these strings, and makes the alert element with id alert 
                    visible by removing the invisible class.
                </p>
                <h5><code>escapeHTML()</code></h5>
                <p>
                    The <code>escapeHTML</code> function replaces special HTML characters in the input string with 
                    their corresponding HTML entities to prevent HTML injection. It uses a regular expression to find these characters and a switch statement to replace them appropriately.
                </p>
            </div>
        </div>
    </main>

    <footer class="container-fluid py-3">
        <div class="container">
            <div class="row align-items-center row-cols-1 gy-2 row-cols-lg-3">
                <div class="col text-center order-last order-lg-first text-lg-start">
                    &copy; 2024 Sijo Sajan
                </div>
                <div class="col text-center">
                    <img src="/img/S_Logo.png" height="35">
                </div>
                <div class="col text-center text-lg-end">
                    <a href="https://www.linkedin.com/in/sijosajan/" class="text-decoration-none">
                        <i class="bi bi-linkedin p-2"></i>
                    </a>
                    <a href="https://github.com/sijo708/" class="text-decoration-none">
                        <i class="bi bi-github p-2"></i>
                    </a>
                    <a href="mailto:sijo708@yahoo.com" class="text-decoration-none">
                        <i class="bi bi-envelope-at p-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!--Booststrap Script-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <!--Prism JS-->
    <script src="/js/prism.js"></script>

    <script>
        Prism.plugins.NormalizeWhitespace.setDefaults({
            'remove-trailing': true,
            'remove-indent': true,
            'left-trim': true,
            'right-trim': true
        })
    </script>
</body>

</html>